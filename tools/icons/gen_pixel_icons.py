from PIL import Image
import os

assets_dir = "content/assets/"
os.makedirs(assets_dir, exist_ok=True)

def create_icon(name, grid):
    img = Image.new("1", (12, 12), 0)
    pixels = img.load()
    for y, row in enumerate(grid):
        for x, char in enumerate(row):
            if char == "1":
                pixels[x, y] = 1
    img.save(os.path.join(assets_dir, name))
    print(f"Saved {name}")

# Canvas 12x12
# Speaker Body (Common) - Left side
# x: 012345
# 0: ......
# 1: ..11..
# 2: .111..
# 3: 1111..
# 4: 1111..
# 5: 1111..
# 6: 1111..
# 7: 1111..
# 8: .111..
# 9: ..11..
# 0: ......
# 1: ......

body = [
    "001100000000",
    "011100000000",
    "111100000000",
    "111100000000",
    "111100000000",
    "111100000000",
    "111100000000",
    "111100000000",
    "011100000000",
    "001100000000",
    "000000000000",
    "000000000000",
]

# Wave 1 (Low) - x=6,7
w1 = [
    "000000000000",
    "000000000000",
    "000000000000",
    "000000100000",
    "000000110000",
    "000000110000",
    "000000110000",
    "000000100000",
    "000000000000",
    "000000000000",
    "000000000000",
    "000000000000",
]

# Wave 2 (Mid) - x=9,10
w2 = [
    "000000000000",
    "000000000000",
    "000000001000",
    "000000001100",
    "000000000110",
    "000000000110",
    "000000001100",
    "000000001000",
    "000000000000",
    "000000000000",
    "000000000000",
    "000000000000",
]

# Wave 3 (High) - x=12?? Out of bounds if not careful. Let's keep it tight.
# Actually let's redraw a centralized nice modern speaker.

# 12x12 Modern Speaker
# Body:
# ...11.......
# ..111.......
# .1111.......
# 11111.......
# 11111.......
# 11111.......
# 11111.......
# .1111.......
# ..111.......
# ...11.......
# ............

clean_body = [
    "000110000000",
    "001110000000",
    "011110000000",
    "111110000000",
    "111110000000",
    "111110000000",
    "111110000000",
    "011110000000",
    "001110000000",
    "000110000000",
    "000000000000",
    "000000000000",
]

# Low Wave
c_w1 = [
    "000000000000",
    "000000000000",
    "000000000000",
    "000000100000",
    "000000100000",
    "000000100000",
    "000000100000",
    "000000000000",
    "000000000000",
    "000000000000",
    "000000000000",
    "000000000000",
]

# Mid Wave
c_w2 = [
    "000000000000",
    "000000000000",
    "000000010000",
    "000000001000",
    "000000001000",
    "000000001000",
    "000000001000",
    "000000010000",
    "000000000000",
    "000000000000",
    "000000000000",
    "000000000000",
]

# High Wave
c_w3 = [
    "000000000000",
    "000000001000",
    "000000000100",
    "000000000010",
    "000000000010",
    "000000000010",
    "000000000010",
    "000000000100",
    "000000001000",
    "000000000000",
    "000000000000",
    "000000000000",
]

# Mute X
c_mute = [
    "000000000000",
    "000000000000",
    "000000000000",
    "000000100100",
    "000000011000",
    "000000011000",
    "000000100100",
    "000000000000",
    "000000000000",
    "000000000000",
    "000000000000",
    "000000000000",
]

def combine(base, *overlays):
    res = []
    for y in range(12):
        row = ""
        for x in range(12):
            val = "0"
            if base[y][x] == "1": val = "1"
            for o in overlays:
                if o[y][x] == "1": val = "1"
            row += val
        res.append(row)
    return res

create_icon("speaker_mute_v3.png", combine(clean_body, c_mute))
create_icon("speaker_low_v3.png", combine(clean_body, c_w1))
create_icon("speaker_mid_v3.png", combine(clean_body, c_w1, c_w2))
create_icon("speaker_high_v3.png", combine(clean_body, c_w1, c_w2, c_w3))
